<!DOCTYPE html>
<html>
	<head>
		<% include partials/head.ejs %>
	</head>
	<body>

		<header>
			<% include partials/header.ejs %>
		</header>


		<div id="content">
			<!-- Vertical navbar -->
			<%- include partials/sidebar.ejs %>
			<!-- End vertical navbar -->
			<div id="profContent">
				<h1>Questions working</h1>
				<form>
					<div class="form-group row">
						<label for="surveyBox"
						       class="col-sm-2 col-form-label">Survey
						</label>
						<div class="col-sm-10 d-flex">
							<select class="custom-select"
							        id="subjectBox">
								<% for (let i = 0; i < surveys.length; i++){ %>
									<option value="<%= surveys[i].id %>">
										<%= surveys[i].year %> <%= surveys[i].subject_name %>
									</option>
								<% } %>
							</select>
						</div>
					</div>

					<div class="form-group row">
						<label class="col-sm-2 col-form-label"
						       for="questionText">Question
						</label>
						<div class="col-sm-10 d-flex">
							<textarea class="form-control rounded-0"
							          id="questionText"
							          rows="5"></textarea>
						</div>
					</div>

					<div class="form-group row">
						<label for="multipleChoiceBox"
						       class="col-sm-2 col-form-label">Is Multiple Choice Question
						</label>
						<div class="col-sm-10 d-flex">
							<input id="multipleChoiceBox"
							       class="form-check-input"
							       onchange="renderMultipleChoices()"
							       type="checkbox">
						</div>
					</div>

					<div id="multipleChoicesPanel">
						<div class="form-group row">
							<label for="multipleChoiceBox"
							       class="col-sm-2 col-form-label">Option 1
							</label>
							<div class="col-sm-10 d-flex">
							<textarea class="form-control rounded-0"
							          disabled
							          id="option1"
							          rows="2"></textarea>
							</div>
						</div>

						<div class="form-group row">
							<label for="multipleChoiceBox"
							       class="col-sm-2 col-form-label">Option 2
							</label>
							<div class="col-sm-10 d-flex">
							<textarea class="form-control rounded-0"
							          disabled
							          id="option2"
							          rows="2"></textarea>
							</div>
						</div>
					</div>
					<div class="form-group row d-flex flex-row-reverse">
						<button type="button"
						        disabled
						        id="addOptionBtn"
						        onclick="renderNewOptionBox()"
						        class="btn btn-primary">New Option
						</button>
					</div>

				</form>
			</div>
		</div>


		<script>
        function renderMultipleChoices() {
            $("#option1")[0].disabled = !$("#multipleChoiceBox")[0].checked;
            $("#option2")[0].disabled = !$("#multipleChoiceBox")[0].checked;
            $("#addOptionBtn")[0].disabled = !$("#multipleChoiceBox")[0].checked;
        }

        function renderNewOptionBox() {
            let panel = $("#multipleChoicesPanel")[0];
            let x = panel.children.length + 1;
            let newOption = `<div id="optionRow${x}"
																	class="form-group row">
																<label for="multipleChoiceBox"
																       class="col-sm-2 col-form-label">Option ${x}
																</label>
																<div class="col-sm-9 d-flex">
																	<textarea class="form-control rounded-0"
																	          id="option${x}"
																	          rows="2"></textarea>
																</div>
																<div class="col-sm-1 d-flex align-items-center">
																	<img  onclick="removeOption(${x})"
									                      style="height: 30px"
									                      src="https://img.icons8.com/carbon-copy/100/000000/delete-forever--v1.png"/>
																</div>
														</div>`
		        panel.insertAdjacentHTML("beforeend", newOption);
        }

        function removeOption(id) {
            $("#optionRow"+id)[0].remove()
        }


		</script>
		<% include partials/scripts.ejs %>
	</body>
</html>
